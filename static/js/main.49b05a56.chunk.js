(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{17:function(e,t,a){e.exports={postContainer:"PostCard_postContainer__eVvEg",postcard:"PostCard_postcard__3jYhV",commentInput:"PostCard_commentInput__2evis",postImage:"PostCard_postImage__EGj4i",username:"PostCard_username__3iMx3",status:"PostCard_status__27axQ",like:"PostCard_like__3-00p",likeItem:"PostCard_likeItem__3g2ji",statustem:"PostCard_statustem__2k7LH",likeCount:"PostCard_likeCount__3hHMd",likeSymbol:"PostCard_likeSymbol__4cP5u",commentSymbol:"PostCard_commentSymbol__1fmTm",footer:"PostCard_footer__ngHMI",date:"PostCard_date__1iNiB",image:"PostCard_image__dioD9",subscribe:"PostCard_subscribe__1AGWM"}},23:function(e,t,a){e.exports={form:"Registration_form__1LjYZ",btn:"Registration_btn__2FA-f",container:"Registration_container__1n0Nr",content:"Registration_content__1E9Cw",login:"Registration_login__1QBzr",register:"Registration_register__3j0km"}},30:function(e,t,a){e.exports={post:"Post_post__29K8Q",postInner:"Post_postInner__1xrQE",image:"Post_image__3VnIY",postImage:"Post_postImage__1GzLD",postInfo:"Post_postInfo__3z9kw",username:"Post_username__WVFFq",like:"Post_like__1bKPS",commentInput:"Post_commentInput__2P6SL",footer:"Post_footer__2j9mn",likedInner:"Post_likedInner__282M0",likedHeader:"Post_likedHeader__3LyYO",likedContent:"Post_likedContent__2FwMS",likedItem:"Post_likedItem__3Shdm"}},43:function(e,t,a){e.exports=a(51)},48:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(41),l=a.n(c),s=(a(48),a(16)),i=a(12),u=a(8),o=a(42),m=a(21),d=a(11),b=a(29),v=Object(o.a)({apiKey:"AIzaSyBrKKG9YKfbCJzf9HsUxwXSldcxoUnigyw",authDomain:"firegramm-b4220.firebaseapp.com",projectId:"firegramm-b4220",storageBucket:"firegramm-b4220.appspot.com",messagingSenderId:"239482573317",appId:"1:239482573317:web:95c2f3b77966550f94826c"}),f=Object(m.c)(v),p=Object(d.g)(v),E=Object(b.b)(v),j=d.k,O=a(0),g=a.n(O),h=a(3),k=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1],c=Object(i.g)();Object(n.useEffect)((function(){var e=Object(b.c)(E,(function(e){r(e||!1)}));return function(){return e()}}),[]);var l=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){var l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)(E,a,n);case 3:return l=e.sent,e.next=6,Object(d.l)(Object(d.d)(p,"users",l.user.uid),{uid:l.user.uid,name:t,email:a,createdAt:d.a.fromDate(new Date)});case 6:r(l.user),c("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.d)(E,t,a);case 3:n=e.sent,r(n.user),c("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}();return{user:a,signup:l,signout:function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.e)(E);case 2:c("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signIn:s}},_=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){if(e){var t=Object(d.d)(p,"users",e),a=Object(d.h)(t,(function(e){c({name:e.data().name,email:e.data().email,avatar:e.data().avatar,avatarPath:e.data().avatarPath,createdAt:e.data().createdAt,uid:e.data().uid,subscribes:e.data().subscribes,subscribers:e.data().subscribers})}));return function(){return a()}}}),[e,null===E||void 0===E?void 0:E.currentUser]),{getProfileData:function(){var t=Object(h.a)(g.a.mark((function t(){var a,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(d.d)(p,"users",e),t.next=3,Object(d.e)(a);case 3:return n=t.sent,t.abrupt("return",n.data());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),uploadImg:function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var c,l,s,i,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=Object(d.d)(p,"users",e||(null===E||void 0===E||null===(c=E.currentUser)||void 0===c?void 0:c.uid)),s=Object(m.d)(f,"avatar/".concat((new Date).getTime()," - ").concat(a.name)),t.prev=2,!n.avatarPath){t.next=6;break}return t.next=6,Object(m.a)(Object(m.d)(f,n.avatarPath));case 6:return t.next=8,Object(m.e)(s,a);case 8:return i=t.sent,t.next=11,Object(m.b)(Object(m.d)(f,i.ref.fullPath));case 11:return u=t.sent,t.next=14,Object(d.m)(l,{avatar:u,avatarPath:i.ref.fullPath});case 14:r(""),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e,a,n){return t.apply(this,arguments)}}(),deleteAvatar:function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=Object(d.d)(p,"users",e||(null===E||void 0===E||null===(n=E.currentUser)||void 0===n?void 0:n.uid)),!window.confirm("Delete avatar?")){t.next=9;break}return c=Object(m.d)(f,a.avatarPath),t.next=7,Object(m.a)(c);case 7:return t.next=9,Object(d.m)(r,{avatar:"",avatarPath:""});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),updateProfileData:function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(d.d)(p,"users",e||(null===E||void 0===E||null===(n=E.currentUser)||void 0===n?void 0:n.uid)),t.prev=1,t.next=4,Object(d.m)(r,{name:a});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),data:r}},x=function(e){var t=e.user,a=e.image,n=e.name,c=e.signout,l=e.classname,i=void 0===l?"":l,u=e.open,o=void 0!==u&&u,m=e.handleLinkClick,d=void 0===m?function(e){return e}:m,b=i;return b+=o?" open":" close",r.a.createElement("ul",{id:"menu",className:b},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{className:"btn",onClick:function(){c(),d()}},"\u0412\u044b\u0439\u0442\u0438")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/profile/".concat(t.uid),onClick:d},n||"Profile")),r.a.createElement("li",null,r.a.createElement("div",{className:"nav_avatar "},r.a.createElement("img",{src:a||"https://imdezcode.files.wordpress.com/2020/02/imdezcode-logo.png",alt:"avatar"})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/login",onClick:d},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/register",onClick:d},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/images",onClick:d},"\u0412\u0441\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438")))},w=function(e){var t=e.open,a=e.setOpen;return console.log(t),r.a.createElement("button",{className:"styled-burger",open:t,onClick:function(){return a(!t)}},r.a.createElement("div",{style:{transform:function(){return t?"rotate(45deg)":"rotate(0)"}}}),r.a.createElement("div",{style:{opacity:function(){return t?"0":"1"},transform:function(){return t?"translateX(20px)":"translateX(0)"}}}),r.a.createElement("div",{style:{transform:function(){return t?"rotate(-45deg)":"rotate(0)"}}}))},N=function(e){var t=e.user,a=e.name,c=e.image,l=e.signout,s=Object(n.useState)(!1),i=Object(u.a)(s,2),o=i[0],m=i[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(w,{open:o,setOpen:m}),r.a.createElement(x,{classname:"styled-menu",user:t,name:a,image:c,signout:l,open:o,handleLinkClick:function(){return m(!1)}})))},I=function(){var e,t,a=k(null===E||void 0===E||null===(e=E.currentUser)||void 0===e?void 0:e.uid),c=a.user,l=a.signout,i=_(null===E||void 0===E||null===(t=E.currentUser)||void 0===t?void 0:t.uid).data,o=Object(n.useState)(""),m=Object(u.a)(o,2),d=m[0],b=m[1],v=Object(n.useState)(window.innerWidth),f=Object(u.a)(v,2),p=f[0],j=f[1],O=Object(n.useState)(""),g=Object(u.a)(O,2),h=g[0],w=g[1];return Object(n.useEffect)((function(){b(null===i||void 0===i?void 0:i.name),w(null===i||void 0===i?void 0:i.avatar)}),[i]),Object(n.useEffect)((function(){window.onresize=function(){j(window.innerWidth)}}),[]),r.a.createElement("nav",{id:"navbar"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("div",{className:"logo"},r.a.createElement(s.b,{to:"/"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"FireGram")))),p>768?r.a.createElement(x,{user:c,name:d,image:h,signout:l}):r.a.createElement(N,{user:c,name:d,image:h,signout:l})))},y=function(){return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("h2",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},"Loading..."))},S=Object(n.createContext)(),C=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(u.a)(a,2),l=c[0],s=c[1],i=Object(n.useState)(!0),o=Object(u.a)(i,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){Object(b.c)(E,(function(e){s(e),d(!1)}))}),[]),m?r.a.createElement(y,null):r.a.createElement(S.Provider,{value:{user:l}},t)},P=function(e){var t=e.children;return Object(n.useContext)(S).user?t:r.a.createElement(i.a,{to:"/login"})},U=a(53),A=function(e){var t=e.setSelectedImage,a=e.docs;return r.a.createElement("div",{className:"img-grid"},a?a.map((function(e){return r.a.createElement(U.a.div,{layout:!0,whileHover:{opacity:1},className:"img-wrap",key:e.id,onClick:function(){return t(e)}},r.a.createElement(U.a.img,{src:e.url,alt:"uploaded picture",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}))})):r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader_inner"})))},L=a(17),z=a.n(L),F=function(e){var t=e.author,a=e.style,n=e.subscribe,c=e.currentUser,l=e.unsubscribe;return r.a.createElement(U.a.div,{className:z.a.username,style:a||""},r.a.createElement(U.a.img,{src:t.avatar||"https://imdezcode.files.wordpress.com/2020/02/imdezcode-logo.png",alt:"avatar"}),r.a.createElement(U.a.p,null,r.a.createElement(s.b,{to:"/profile/".concat(t.uid)}," ",t.name)),r.a.createElement(U.a.div,null,t.uid!==c.uid&&r.a.createElement(r.a.Fragment,null,n&&!c.subscribes.includes(t.uid)?r.a.createElement(U.a.span,{className:z.a.subscribe,onClick:function(){n(t)}},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"):r.a.createElement(U.a.span,{className:z.a.subscribe,onClick:function(){l(t)}},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"))))},D=function(e){var t=e.img;return r.a.createElement(U.a.img,{className:z.a.postImage,src:t})},H=function(e){var t=e.author,a=e.setLike,c=e.selectedImage,l=e.setSelectedPost,i=e.postId,o=e.isAll,m=Object(n.useState)(c.like),d=Object(u.a)(m,2),b=d[0],v=d[1];return r.a.createElement(U.a.div,{className:z.a.status},r.a.createElement(U.a.div,{className:z.a.like},r.a.createElement(U.a.div,{className:z.a.likeItem},r.a.createElement(U.a.span,{className:z.a.likeSymbol,onClick:function(){a(i,t.uid),v(c.like+1)}},"\u2661")),r.a.createElement(U.a.div,{className:z.a.likeItem},r.a.createElement(s.b,{to:o?"/post/".concat(c.id):"/post/".concat(t.uid,"/").concat(c.id)},r.a.createElement(U.a.span,{className:z.a.commentSymbol}," \ud83d\udcac")))),r.a.createElement(U.a.div,{className:z.a.statustem},r.a.createElement(U.a.span,{onClick:function(e){l(c)}},"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f: ",b||0)))},M=function(e){var t=e.addComment,a=e.postId,c=e.author,l=Object(n.useState)(""),s=Object(u.a)(l,2),i=s[0],o=s[1];return r.a.createElement("div",{className:z.a.commentInput},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(a,c,i),o("")}},r.a.createElement("input",{onChange:function(e){o(e.target.value)},value:i,placeholder:"Add a comment\u2026"})))},R=function(e){var t=function(e){var t=e.getDate();t<10&&(t="0"+t);var a=e.getMonth()+1;a<10&&(a="0"+a);var n=e.getFullYear()%100;return n<10&&(n="0"+n),t+"."+a+"."+n}(e.author.createdAt.toDate());return r.a.createElement(U.a.div,{className:z.a.footer},r.a.createElement(U.a.p,{className:z.a.date},t))},B=a(30),V=a.n(B),K=function(e){var t=e.likedUsers,a=e.setSelectedPost;return r.a.createElement(U.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(U.a.div,{className:V.a.likedInner,initial:{y:"-100vh"},animate:{y:"10vh"}},r.a.createElement(U.a.div,{className:V.a.likedHeader},r.a.createElement("h1",null,'\u041e\u0442\u043c\u0435\u0442\u043a\u0438 "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"')," "),r.a.createElement(U.a.div,{className:V.a.likedContent},t?r.a.createElement(U.a.div,null,t.map((function(e){return r.a.createElement("div",{className:V.a.likedItem,key:e.uid},r.a.createElement(F,{author:e}))}))):null)))},Y=function(e){var t=e.selectedImage,a=e.setSelectedImage,c=e.author,l=e.setLike,s=e.addComment,i=e.currentUser,o=e.isAll,m=Object(n.useState)(null),d=Object(u.a)(m,2),b=d[0],v=d[1];return r.a.createElement(U.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(U.a.div,{className:z.a.postcard,initial:{y:"-100vh"},animate:{y:"10vh"}},r.a.createElement(F,{author:c,currentUser:i}),r.a.createElement(D,{img:t.url}),r.a.createElement(H,{setLike:function(){l(t.postId,c.uid)},selectedImage:t,author:c,setSelectedPost:v,isAll:o}),r.a.createElement(M,{postId:t.postId,author:c,addComment:s}),r.a.createElement(R,{author:c})),b&&r.a.createElement(K,{likedUsers:t.likedUsers,setSelectedPost:v}))},G=a(18),Q=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],c=a[1],l=_(E.currentUser.uid).data;return Object(n.useEffect)((function(){if(l){var t=Object(d.c)(p,e);if(0===l.subscribes.length)return void c([]);var a=Object(d.j)(t,Object(d.i)("createdAt","desc"),Object(d.n)("uid","in",l.subscribes)),n=Object(d.h)(a,(function(e){var t=[];e.forEach((function(e){t.push(Object(G.a)(Object(G.a)({},e.data()),{},{id:e.id}))})),c(t)}));return function(){return n()}}}),[e,l]),{docs:r}},W=a(14),J=function(e,t){var a,r=Object(n.useState)(null),c=Object(u.a)(r,2),l=c[0],s=c[1],i=_(null===E||void 0===E||null===(a=E.currentUser)||void 0===a?void 0:a.uid).data;return Object(n.useEffect)((function(){if(e&&t){var a=Object(d.d)(p,"images",t,"photo",e),n=Object(d.h)(a,(function(e){s(e.data())}));return function(){return n()}}if(e){var r=Object(d.d)(p,"images",e),c=Object(d.h)(r,(function(e){s(e.data())}));return function(){return c()}}}),[e,t]),{docs:l,setLike:function(){var e=Object(h.a)(g.a.mark((function e(t,a){var n,r,c,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.j)(Object(d.c)(p,"images"),Object(d.n)("postId","==",t)),e.next=3,Object(d.f)(n);case 3:return e.sent.forEach(function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(d.d)(p,"images",t.id),t.data().likedUsers.find((function(e){return e.uid===i.uid}))){e.next=10;break}return e.prev=2,e.next=5,Object(d.m)(a,{like:(t.data().like+=1)||1,likedUsers:[].concat(Object(W.a)(t.data().likedUsers),[i])});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()),r=Object(d.j)(Object(d.c)(p,"images",a,"photo"),Object(d.n)("postId","==",t)),e.next=8,Object(d.f)(r);case 8:return e.sent.forEach(function(){var e=Object(h.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(d.d)(p,"images",a,"photo",t.id),t.data().likedUsers.find((function(e){return e.uid===i.uid}))){e.next=10;break}return e.prev=2,e.next=5,Object(d.m)(n,{like:(t.data().like+=1)||1,likedUsers:[].concat(Object(W.a)(t.data().likedUsers),[i])});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()),c=Object(d.d)(p,"users",i.uid),e.next=13,Object(d.e)(c);case 13:if((l=e.sent).data().likedPosts.includes(t)){e.next=23;break}return e.prev=15,e.next=18,Object(d.m)(c,{likedPosts:l.data().likedPosts?[].concat(Object(W.a)(l.data().likedPosts),[t]):[t]});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[15,20]])})));return function(t,a){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){var r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.j)(Object(d.c)(p,"images"),Object(d.n)("postId","==",t)),e.next=3,Object(d.f)(r);case 3:return e.sent.forEach(function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(d.d)(p,"images",t.id),e.prev=1,e.next=4,Object(d.m)(a,{comments:[].concat(Object(W.a)(t.data().comments),[{comment:n,author:i}])});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),c=Object(d.j)(Object(d.c)(p,"images",a.uid,"photo"),Object(d.n)("postId","==",t)),e.next=8,Object(d.f)(c);case 8:e.sent.forEach(function(){var e=Object(h.a)(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.d)(p,"images",a.uid,"photo",t.id),e.prev=1,e.next=4,Object(d.m)(r,{comments:[].concat(Object(W.a)(t.data().comments),[{comment:n,author:i}])});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),subscribe:function(){var e=Object(h.a)(g.a.mark((function e(t){var a,n,r,c,l,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.d)(p,"users",null===E||void 0===E||null===(a=E.currentUser)||void 0===a?void 0:a.uid),e.next=3,Object(d.e)(r);case 3:if((c=e.sent).data().subscribes.includes(t.uid)){e.next=7;break}return e.next=7,Object(d.m)(r,{subscribes:[].concat(Object(W.a)(c.data().subscribes),[t.uid])});case 7:return l=Object(d.d)(p,"users",t.uid),e.next=10,Object(d.e)(l);case 10:if((s=e.sent).data().subscribers.includes(null===E||void 0===E||null===(n=E.currentUser)||void 0===n?void 0:n.uid)){e.next=14;break}return e.next=14,Object(d.m)(l,{subscribers:[].concat(Object(W.a)(s.data().subscribers),[null===E||void 0===E||null===(i=E.currentUser)||void 0===i?void 0:i.uid])});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),unsubscribe:function(){var e=Object(h.a)(g.a.mark((function e(t){var a,n,r,c,l,s,i,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.d)(p,"users",null===E||void 0===E||null===(a=E.currentUser)||void 0===a?void 0:a.uid),e.next=3,Object(d.e)(r);case 3:if(!(c=e.sent).data().subscribes.includes(t.uid)){e.next=8;break}return l=c.data().subscribes.filter((function(e){return e!==t.uid})),e.next=8,Object(d.m)(r,{subscribes:l});case 8:return s=Object(d.d)(p,"users",t.uid),e.next=11,Object(d.e)(s);case 11:if(!(i=e.sent).data().subscribers.includes(null===E||void 0===E||null===(n=E.currentUser)||void 0===n?void 0:n.uid)){e.next=16;break}return u=i.data().subscribers.filter((function(e){var t;return e!==(null===E||void 0===E||null===(t=E.currentUser)||void 0===t?void 0:t.uid)})),e.next=16,Object(d.m)(s,{subscribers:u});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},T=function(){var e,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Q("images").docs,i=J().setLike,o=_(null===E||void 0===E||null===(e=E.currentUser)||void 0===e?void 0:e.uid).data,m=s.filter((function(e){return(null===e||void 0===e?void 0:e.email)===(null===c||void 0===c?void 0:c.email)}))[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{setSelectedImage:l,docs:s}),c&&r.a.createElement(Y,{selectedImage:c,setSelectedImage:l,author:m,setLike:i,currentUser:o}))},X=function(e,t){var a=Object(n.useState)([]),r=Object(u.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){var a;a=t?Object(d.c)(p,e,t,"photo"):Object(d.c)(p,e);var n=Object(d.j)(a,Object(d.i)("createdAt","desc")),r=Object(d.h)(n,(function(e){var t=[];e.forEach((function(e){t.push(Object(G.a)(Object(G.a)({},e.data()),{},{id:e.id}))})),l(t)}));return function(){return r()}}),[e,t]),{docs:c}},q=function(){var e,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1],s=X("images").docs,i=J(),o=i.setLike,m=i.addComment,d=_(null===E||void 0===E||null===(e=E.currentUser)||void 0===e?void 0:e.uid).data,b=s.filter((function(e){return(null===e||void 0===e?void 0:e.email)===(null===c||void 0===c?void 0:c.email)}))[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{setSelectedImage:l,docs:s}),c&&r.a.createElement(Y,{selectedImage:c,setSelectedImage:l,author:b,setLike:o,addComment:m,currentUser:d,isAll:!0}))},Z=a(5),$=a(23),ee=a.n($),te=function(){var e=k().signIn,t=Object(n.useState)({email:"",password:"",error:null,loading:!1}),a=Object(u.a)(t,2),c=a[0],l=a[1],i=c.email,o=c.password,m=c.error,d=c.loading,b=function(e){l(Object(G.a)(Object(G.a)({},c),{},Object(Z.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:ee.a.container},r.a.createElement("div",{className:ee.a.login},r.a.createElement("div",{className:ee.a.content},r.a.createElement("h1",null,"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("form",{className:ee.a.form,onSubmit:function(t){t.preventDefault(),l(Object(G.a)(Object(G.a)({},c),{},{error:null,loading:!0})),i&&o||l(Object(G.a)(Object(G.a)({},c),{},{error:"All fields are required!"})),e(i,o)}},r.a.createElement("input",{type:"email",placeholder:"email",name:"email",value:i,onChange:b}),r.a.createElement("input",{type:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c",name:"password",value:o,onChange:b}),r.a.createElement("span",{className:ee.a.forget},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),r.a.createElement("span",{className:ee.a.clearfix}),r.a.createElement("button",{disabled:d,className:ee.a.btn}," ",d?"\u0412\u0445\u043e\u0434...":"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("p",null,"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? - ",r.a.createElement(s.b,{to:"/register"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))),m?r.a.createElement("p",{classNameName:"error"},m):null))},ae=function(e){var t=e.comments,a=e.currentUser;return r.a.createElement("div",{className:"comments"},t?t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(F,{author:null===e||void 0===e?void 0:e.author,currentUser:a,style:{fontSize:"14px"}}),r.a.createElement("span",{className:"comment"},e.comment))})):null)},ne=function(){var e,t=Object(i.h)(),a=t.id,c=t.uid,l=_(null===E||void 0===E||null===(e=E.currentUser)||void 0===e?void 0:e.uid).data,s=J(a,c),o=s.docs,m=s.setLike,d=s.addComment,b=s.subscribe,v=s.unsubscribe,f=_(null===o||void 0===o?void 0:o.uid).data,p=Object(n.useState)(null),j=Object(u.a)(p,2),O=j[0],g=j[1],h=Object(n.useState)(null),k=Object(u.a)(h,2),x=k[0],w=k[1],N=Object(n.useState)(null),I=Object(u.a)(N,2),S=I[0],C=I[1],P=Object(n.useState)(null),A=Object(u.a)(P,2),L=A[0],z=A[1];Object(n.useEffect)((function(){g(f),w(o),z(null===o||void 0===o?void 0:o.comments)}),[o,a,f,l]);var B=function(e){C(e)};return r.a.createElement("div",{className:V.a.post},r.a.createElement("div",{className:V.a.postInner},x&&O?r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{img:x.url}),r.a.createElement(U.a.div,{className:V.a.postInfo},r.a.createElement(F,{author:O,subscribe:b,currentUser:l,unsubscribe:v}),r.a.createElement(H,{setLike:m,selectedImage:x,author:O,setSelectedPost:B,postId:a}),r.a.createElement(R,{author:O}),r.a.createElement(ae,{comments:L,currentUser:l}),r.a.createElement(M,{addComment:function(e,t,a){d(e,t,a),z([].concat(Object(W.a)(L),[{author:t,text:a}]))},author:O,postId:x.postId})),S&&r.a.createElement(K,{likedUsers:x.likedUsers,setSelectedPost:B})):r.a.createElement(y,null)))},re=function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"25px",height:"25px",cursor:"pointer"},viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))},ce=function(e){var t=e.deleteImage;return r.a.createElement("svg",{onClick:t,xmlns:"http://www.w3.org/2000/svg",style:{width:"25px",height:"25px",cursor:"pointer",color:"#f24957"},viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"}))},le=function(e){var t=e.avatar,a=e.deleteImage,n=e.setImg;return r.a.createElement("div",{className:"img_container "},r.a.createElement("img",{src:t||"https://imdezcode.files.wordpress.com/2020/02/imdezcode-logo.png",alt:"avatar"}),r.a.createElement("div",{className:"overlay"},a&&n&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"photo"},r.a.createElement(re,null)),t?r.a.createElement(ce,{deleteImage:a}):null,r.a.createElement("input",{type:"file",id:"photo",accept:"image/*",style:{display:"none"},onChange:function(e){return n(e.target.files[0])}}))))},se=function(e){var t,a=e.user,n=e.setImg,c=e.deleteImage,l=e.id,i=e.active;return r.a.createElement("div",{className:"sidenav"},r.a.createElement("div",{className:"profile"},n&&c?r.a.createElement(le,{avatar:a.avatar,setImg:n,deleteImage:c}):r.a.createElement(le,{avatar:a.avatar}),r.a.createElement("div",{className:"name"},a.name),r.a.createElement("div",{className:"job"},a.email)),r.a.createElement("div",{className:"sidenav-url"},r.a.createElement("div",{className:"url"},r.a.createElement(s.b,{to:"/profile/".concat(l),className:"profile"===i?"active":""},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement("hr",{align:"center"})),(null===E||void 0===E||null===(t=E.currentUser)||void 0===t?void 0:t.uid)===l&&r.a.createElement("div",{className:"url"},r.a.createElement(s.b,{to:"/settings",className:"settings"===i?"active":""},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement("hr",{align:"center"}))))},ie=function(){return r.a.createElement("div",{className:"title"},r.a.createElement("h2",null,"\u0412\u0430\u0448\u0438 \u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f."))},ue=function(e,t){var a=Object(n.useState)(0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)(null),i=Object(u.a)(s,2),o=i[0],b=i[1],v=Object(n.useState)(null),O=Object(u.a)(v,2),k=O[0],x=O[1],w=_(E.currentUser.uid).data;return Object(n.useEffect)((function(){var a=Object(m.d)(f,e.name),n=Object(d.c)(p,"images",E.currentUser.uid,"photo"),r=Object(m.f)(a,e);r.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;l(t)}),(function(e){return b(e)}),Object(h.a)(g.a.mark((function e(){var a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)(r.snapshot.ref);case 2:if(a=e.sent,c=j(),!w){e.next=8;break}return e.next=7,Object(d.b)(n,{url:a,createdAt:c,avatar:(null===w||void 0===w?void 0:w.avatar)||"",name:(null===w||void 0===w?void 0:w.name)||"",email:(null===w||void 0===w?void 0:w.email)||"",uid:E.currentUser.uid,like:0,postId:t,likedUsers:[]});case 7:x(a);case 8:case"end":return e.stop()}}),e)}))));var c=Object(d.c)(p,"images");return Object(h.a)(g.a.mark((function e(){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=7;break}return a=j(),e.next=4,Object(m.b)(r.snapshot.ref);case 4:return n=e.sent,e.next=7,Object(d.b)(c,{url:n,createdAt:a,avatar:(null===w||void 0===w?void 0:w.avatar)||"",name:(null===w||void 0===w?void 0:w.name)||"",email:(null===w||void 0===w?void 0:w.email)||"",uid:E.currentUser.uid,like:0,postId:t,likedUsers:[],comments:[]});case 7:case"end":return e.stop()}}),e)})))}),[e,w]),{progress:c,url:k,error:o}},oe=function(e){var t=e.file,a=e.setFile,c=100*Math.random(),l=ue(t,c),s=l.url,i=l.progress;return Object(n.useEffect)((function(){s&&a(null)}),[s,a]),r.a.createElement(U.a.div,{initial:{width:0},animate:{width:i+"%"},className:"progress-bar"})},me=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),s=Object(u.a)(l,2),i=s[0],o=s[1],m=["image/png","image/jpeg"];return r.a.createElement("form",{className:"upload_form"},r.a.createElement("label",null,r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&m.includes(t.type)?(c(t),o("")):(c(null),o("Please select an image file (png or jpeg)"))}}),r.a.createElement("span",null,"+")),r.a.createElement("div",{className:"output"},i&&r.a.createElement("div",{className:"error"},i),a&&r.a.createElement("div",null,a.name),a&&r.a.createElement(oe,{file:a,setFile:c})))},de=function(){var e,t=Object(i.h)().id,a=Object(n.useState)(null),c=Object(u.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(null),m=Object(u.a)(o,2),d=m[0],b=m[1],v=Object(n.useState)([]),f=Object(u.a)(v,2),p=f[0],j=f[1],O=X("images",t).docs,g=_(t).data,h=J(t),k=h.setLike,x=h.addComment;return Object(n.useEffect)((function(){b(g),j(O)}),[g,t,O]),r.a.createElement("div",null,d&&t?r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{user:d,active:"profile",id:t}),t===(null===E||void 0===E||null===(e=E.currentUser)||void 0===e?void 0:e.uid)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,null),r.a.createElement(me,null)),r.a.createElement("div",null,r.a.createElement(A,{setSelectedImage:s,docs:p}),l&&r.a.createElement(Y,{selectedImage:l,setSelectedImage:s,author:d,setLike:k,addComment:x,currentUser:g}))):"No data")},be=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:null,loading:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=k().signup,s=function(e){c(Object(G.a)(Object(G.a)({},a),{},Object(Z.a)({},e.target.name,e.target.value)))},i=a.name,o=a.email,m=a.password,d=a.error,b=a.loading;return r.a.createElement("div",{className:ee.a.container},r.a.createElement("div",{className:ee.a.register},r.a.createElement("div",{className:ee.a.content},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(Object(G.a)(Object(G.a)({},a),{},{loading:!0})),l(i,o,m),c({name:"",email:"",password:"",error:null,loading:!1})},className:ee.a.form},r.a.createElement("input",{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",value:i,onChange:s}),r.a.createElement("input",{type:"email",placeholder:"email",name:"email",value:o,onChange:s}),r.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:m,onChange:s}),r.a.createElement("span",{className:ee.a.clearfix}),r.a.createElement("button",{className:ee.a.btn,disabled:b},b?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),d?r.a.createElement("p",{classNameName:"error"},d):null))},ve=function(e){var t=e.user,a=_().updateProfileData,c=Object(n.useState)(!1),l=Object(u.a)(c,2),s=l[0],i=l[1],o=Object(n.useState)(t.name),m=Object(u.a)(o,2),d=m[0],b=m[1];return r.a.createElement("div",{className:"main"},r.a.createElement("h2",null,"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0440\u043e\u0444\u0438\u043b\u0435"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("i",{className:"fa fa-pen fa-xs edit",onClick:function(){i(!s)}}),r.a.createElement("div",null,s?r.a.createElement("div",null,r.a.createElement("input",{value:d,onChange:function(e){b(e.target.value)},className:"input"}),r.a.createElement("button",{className:"button",onClick:function(){a(d),i(!1)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")):r.a.createElement("p",null,"\u0418\u043c\u044f: ",r.a.createElement("span",null,t.name))),r.a.createElement("div",null,r.a.createElement("p",null,"Email: ",r.a.createElement("span",null,t.email))),r.a.createElement("div",null,r.a.createElement("p",null,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d:",r.a.createElement("span",null,t.createdAt.toDate().toDateString())," ")))))},fe=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(u.a)(l,2),i=s[0],o=s[1],m=_(E.currentUser.uid),d=m.uploadImg,b=m.deleteAvatar,v=m.data;Object(n.useEffect)((function(){c(v),i&&d(i,a,o)}),[i,v]);return r.a.createElement("div",null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{user:a,setImg:o,deleteImage:function(){b(a)},active:"settings",id:E.currentUser.uid}),r.a.createElement(ve,{user:a})):"No data")};var pe=function(){var e=k().user;return r.a.createElement("div",{className:"App"},r.a.createElement(C,null,r.a.createElement(I,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",element:r.a.createElement(P,{user:e},r.a.createElement(T,null))}),r.a.createElement(i.b,{path:"/firegram-main",element:r.a.createElement(P,{user:e},r.a.createElement(T,null))}),r.a.createElement(i.b,{path:"/images",element:r.a.createElement(q,null)}),r.a.createElement(i.b,{path:"/login",element:r.a.createElement(te,null)}),r.a.createElement(i.b,{path:"/register",element:r.a.createElement(be,null)}),r.a.createElement(i.b,{path:"/profile/:id",element:r.a.createElement(de,null)}),r.a.createElement(i.b,{path:"/post/:uid/:id",element:r.a.createElement(ne,null)}),r.a.createElement(i.b,{path:"/post/:id",element:r.a.createElement(ne,null)}),r.a.createElement(i.b,{path:"/settings",element:r.a.createElement(P,{user:e},r.a.createElement(fe,null))}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,null,r.a.createElement(pe,null))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.49b05a56.chunk.js.map